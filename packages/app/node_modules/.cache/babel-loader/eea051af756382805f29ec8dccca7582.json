{"ast":null,"code":"import _slicedToArray from \"D:/MyDoc/CODING/MyProjects/d3-tests/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"D:\\\\MyDoc\\\\CODING\\\\MyProjects\\\\d3-tests\\\\packages\\\\app\\\\src\\\\App.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\n// import { GlobalStyle, theme } from '@d3-tests/design-system';\nimport React from 'react';\nimport * as d3 from 'd3-shape'; // import { ThemeProvider } from 'styled-components';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar MAX_SIZE = 500;\nvar DETALIZATION = 10;\n\nvar random = function random(min, max) {\n  return Math.floor(Math.random() * (max - min)) + min;\n};\n\nvar App = function App() {\n  _s();\n\n  var _square;\n\n  var _React$useState = React.useState(DETALIZATION),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      detalization = _React$useState2[0],\n      setDetalization = _React$useState2[1];\n\n  var points = React.useMemo(function () {\n    return Array.from({\n      length: 50\n    }, function (_, i) {\n      return {\n        height: random(10, MAX_SIZE),\n        width: 20,\n        index: i\n      };\n    });\n  }, []);\n  var hLines = React.useMemo(function () {\n    var step = MAX_SIZE / detalization;\n    return Array.from({\n      length: detalization + 1\n    }, function (_, i) {\n      return {\n        y: step * i\n      };\n    });\n  }, [detalization]);\n  var vLines = React.useMemo(function () {\n    console.log(detalization);\n    var step = MAX_SIZE / detalization;\n    return Array.from({\n      length: detalization + 1\n    }, function (_, i) {\n      return {\n        x: step * i\n      };\n    });\n  }, [detalization]);\n  var square = d3.area().x(function (p) {\n    return p.index * p.width;\n  }).y0(function (p) {\n    return 0;\n  }).y1(function (p) {\n    return p.height;\n  });\n  React.useEffect(function () {\n    var handler = function handler(e) {\n      setDetalization(function (prev) {\n        return prev + (e.deltaY > 0 ? 1 : -1);\n      });\n    };\n\n    window.addEventListener('wheel', handler);\n    return function () {\n      window.removeEventListener('wheel', handler);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    height: MAX_SIZE,\n    width: MAX_SIZE,\n    children: [/*#__PURE__*/_jsxDEV(\"path\", {\n      d: (_square = square(points)) !== null && _square !== void 0 ? _square : undefined\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, _this), hLines.map(function (l) {\n      return /*#__PURE__*/_jsxDEV(\"line\", {\n        y1: l.y,\n        y2: l.y,\n        x1: 0,\n        x2: MAX_SIZE,\n        strokeWidth: 1,\n        stroke: \"#000000\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, _this);\n    }), vLines.map(function (l) {\n      return /*#__PURE__*/_jsxDEV(\"line\", {\n        y1: 0,\n        y2: MAX_SIZE,\n        x1: l.x,\n        x2: l.x,\n        strokeWidth: 1,\n        stroke: \"#000000\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, _this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(App, \"E2eQ/DzAfyfUp8r4dcjGkp4/tfw=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","d3","MAX_SIZE","DETALIZATION","random","min","max","Math","floor","App","useState","detalization","setDetalization","points","useMemo","Array","from","length","_","i","height","width","index","hLines","step","y","vLines","console","log","x","square","area","p","y0","y1","useEffect","handler","e","prev","deltaY","window","addEventListener","removeEventListener","undefined","map","l"],"sources":["D:/MyDoc/CODING/MyProjects/d3-tests/packages/app/src/App.tsx"],"sourcesContent":["// import { GlobalStyle, theme } from '@d3-tests/design-system';\nimport React from 'react';\nimport * as d3 from 'd3-shape';\n// import { ThemeProvider } from 'styled-components';\n\ninterface Point {\n  height: number;\n  width: number;\n  index: number;\n}\n\ninterface HLine {\n  y: number;\n}\n\ninterface VLine {\n  x: number;\n}\n\nconst MAX_SIZE = 500;\nconst DETALIZATION = 10;\n\nconst random = (min: number, max: number) =>\n  Math.floor(Math.random() * (max - min)) + min;\n\nconst App = () => {\n  const [detalization, setDetalization] = React.useState(DETALIZATION);\n\n  const points = React.useMemo<Point[]>(\n    () =>\n      Array.from({ length: 50 }, (_, i) => ({\n        height: random(10, MAX_SIZE),\n        width: 20,\n        index: i,\n      })),\n    [],\n  );\n\n  const hLines = React.useMemo(() => {\n    const step = MAX_SIZE / detalization;\n\n    return Array.from<undefined, HLine>(\n      { length: detalization + 1 },\n      (_, i) => ({\n        y: step * i,\n      }),\n    );\n  }, [detalization]);\n\n  const vLines = React.useMemo(() => {\n    console.log(detalization);\n    const step = MAX_SIZE / detalization;\n\n    return Array.from<undefined, VLine>(\n      { length: detalization + 1 },\n      (_, i) => ({\n        x: step * i,\n      }),\n    );\n  }, [detalization]);\n\n  const square = d3\n    .area<Point>()\n    .x((p) => p.index * p.width)\n    .y0((p) => 0)\n    .y1((p) => p.height);\n\n  React.useEffect(() => {\n    const handler = (e: WheelEvent) => {\n      setDetalization((prev) => prev + (e.deltaY > 0 ? 1 : -1));\n    };\n\n    window.addEventListener('wheel', handler);\n\n    return () => {\n      window.removeEventListener('wheel', handler);\n    };\n  }, []);\n\n  return (\n    <svg height={MAX_SIZE} width={MAX_SIZE}>\n      <path d={square(points) ?? undefined}></path>\n\n      {hLines.map((l) => (\n        <line\n          y1={l.y}\n          y2={l.y}\n          x1={0}\n          x2={MAX_SIZE}\n          strokeWidth={1}\n          stroke=\"#000000\"\n        />\n      ))}\n\n      {vLines.map((l) => (\n        <line\n          y1={0}\n          y2={MAX_SIZE}\n          x1={l.x}\n          x2={l.x}\n          strokeWidth={1}\n          stroke=\"#000000\"\n        />\n      ))}\n    </svg>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}